


ARM Macro Assembler    Page 1 


    1 00000000         ;******************** (C) Ayden Dauenhauer *************
                       ******************************
    2 00000000         ; @file    HW7 Problem 1
    3 00000000         ; @author  Ayden Dauenhauer
    4 00000000         ; @date    2023
    5 00000000         ;*******************************************************
                       ******************************
    6 00000000         
    7 00000000         
    8 00000000                 AREA             main, CODE, READONLY
    9 00000000                 EXPORT           __main
   10 00000000                 ENTRY
   11 00000000         
   12 00000000         __main  PROC
   13 00000000         
   14 00000000 4813            ldr              r0, =array  ; Pointer to array 
                                                            of string pointers
   15 00000002 F04F 010A       ldr              r1, =10     ; Number of items i
                                                            n array
   16 00000006 F7FF FFFE       bl               mysort      ; Call sorting rout
                                                            ine
   17 0000000A E7FE    endless b                endless
   18 0000000C         
   19 0000000C                 ENDP
   20 0000000C         
   21 0000000C         mysort  PROC
   22 0000000C B500            push             {lr}        ;Stores the return 
                                                            address
   23 0000000E 4602            mov              r2, r0      ;Copies the array a
                                                            ddress to r2 to be 
                                                            changed later
   24 00000010 F1A1 0101 
                       loop1   sub              r1, r1, #1  ;Decrements the cou
                                                            nt
   25 00000014 460F            mov              r7, r1      ;Second counter for
                                                             iterating the comp
                                                            are
   26 00000016 4613            mov              r3, r2      ;Set the start of t
                                                            he range
   27 00000018 461C            mov              r4, r3      ;Set to the next ad
                                                            dress part 1
   28 0000001A F104 0404       add              r4, r4, #4  ;Set to the next ad
                                                            dress part 2
   29 0000001E F7FF FFFE       bl               compare_and_swap
   30 00000022 4770            bx               lr
   31 00000024                 ENDP
   32 00000024         
   33 00000024         compare_and_swap
                               PROC
   34 00000024 681D    compareloop
                               ldr              r5, [r3]    ;Loads the first va
                                                            lue into r5
   35 00000026 6826            ldr              r6, [r4]    ;Loads the next val
                                                            ue into r6
   36 00000028 42B5            cmp              r5, r6      ;Compares r5 and r6
                                                            
   37 0000002A DC0E            bgt              nextsmaller ;If r5>r6 then keep
                                                             r4 and compare to 
                                                            the next number



ARM Macro Assembler    Page 2 


   38 0000002C F104 0404       add              r4, r4, #4  ;  ;Go to the next 
                                                            value
   39 00000030 F1A7 0701       sub              r7, r7, #1  ;Decrement the coun
                                                            t
   40 00000034 2F00            cmp              r7, #0      ;Check if it's at t
                                                            he end of the list
   41 00000036 DCF5            bgt              compareloop ;If not, then keep 
                                                            comparing
   42 00000038         ;After reaching this line, the smallest value's address 
                       should be in r3 and the value in r5
   43 00000038 681D            ldr              r5, [r3]    ;Load the smallest 
                                                            number into r5
   44 0000003A 6816            ldr              r6, [r2]    ;Load the address i
                                                            nto r6
   45 0000003C 6015            str              r5, [r2]    ;Store the address
   46 0000003E 601E            str              r6, [r3]    ;Store the smallest
                                                             number
   47 00000040 F102 0204       add              r2, r2, #4  ;Go to the next add
                                                            ress
   48 00000044 2901            cmp              r1, #1      ;Check if it's at t
                                                            he end of the list
   49 00000046 DCE3            bgt              loop1       ;If not then start 
                                                            the whole proccess 
                                                            over
   50 00000048 BD00            pop              {pc}        ;If done, then retu
                                                            rn
   51 0000004A         
   52 0000004A 4623    nextsmaller
                               mov              r3, r4      ;Swap the smallest 
                                                            number address into
                                                             r3
   53 0000004C E7EA            b                compareloop ;Go back to the com
                                                            pare function
   54 0000004E         
   55 0000004E 4770            bx               lr
   56 00000050                 ENDP
   57 00000050         
   58 00000050                 ALIGN
   59 00000050 00000000        AREA             mydata, DATA, READONLY
   60 00000000         
   61 00000000 00000009 
              00000002 
              00000005 
              00000001 
              00000008 
              00000006 
              00000007 
              00000000 
              00000003 
              00000004 array   DCD              9,2,5,1,8,6,7,0,3,4
   62 00000028         
   63 00000028         
   64 00000028                 END
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M4 --apcs=interw
ork --depend=.\objects\main.d -o.\objects\main.o -IC:\Apps\Keil_v5\ARM\RV31\INC
 -IC:\Apps\Keil_v5\ARM\CMSIS\Include --predefine="__UVISION_VERSION SETA 536" -
-list=.\listings\main.lst main.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

__main 00000000

Symbol: __main
   Definitions
      At line 12 in file main.s
   Uses
      At line 9 in file main.s
Comment: __main used once
compare_and_swap 00000024

Symbol: compare_and_swap
   Definitions
      At line 33 in file main.s
   Uses
      At line 29 in file main.s
Comment: compare_and_swap used once
compareloop 00000024

Symbol: compareloop
   Definitions
      At line 34 in file main.s
   Uses
      At line 41 in file main.s
      At line 53 in file main.s

endless 0000000A

Symbol: endless
   Definitions
      At line 17 in file main.s
   Uses
      At line 17 in file main.s
Comment: endless used once
loop1 00000010

Symbol: loop1
   Definitions
      At line 24 in file main.s
   Uses
      At line 49 in file main.s
Comment: loop1 used once
main 00000000

Symbol: main
   Definitions
      At line 8 in file main.s
   Uses
      None
Comment: main unused
mysort 0000000C

Symbol: mysort
   Definitions
      At line 21 in file main.s
   Uses
      At line 16 in file main.s
Comment: mysort used once
nextsmaller 0000004A




ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

Symbol: nextsmaller
   Definitions
      At line 52 in file main.s
   Uses
      At line 37 in file main.s
Comment: nextsmaller used once
8 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

array 00000000

Symbol: array
   Definitions
      At line 61 in file main.s
   Uses
      At line 14 in file main.s
Comment: array used once
mydata 00000000

Symbol: mydata
   Definitions
      At line 59 in file main.s
   Uses
      None
Comment: mydata unused
2 symbols
343 symbols in table
