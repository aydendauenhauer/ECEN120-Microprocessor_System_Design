


ARM Macro Assembler    Page 1 


    1 00000000         ;******************** (C) Ayden Dauenhauer *************
                       ******************************
    2 00000000         ; @file    HW7 Problem 2
    3 00000000         ; @author  Ayden Dauenhauer
    4 00000000         ; @date    2023
    5 00000000         ;*******************************************************
                       ******************************
    6 00000000         
    7 00000000         
    8 00000000                 AREA             main, CODE, READONLY
    9 00000000                 EXPORT           __main
   10 00000000                 ENTRY
   11 00000000         
   12 00000000         __main  PROC
   13 00000000         
   14 00000000 481D            ldr              r0, =strarray ; Pointer to arra
                                                            y of string pointer
                                                            s
   15 00000002 F04F 0107       ldr              r1, =7      ; Number of pointer
                                                            s in strarray
   16 00000006 F7FF FFFE       bl               mysort      ; Call sorting rout
                                                            ine
   17 0000000A E7FE    endless b                endless
   18 0000000C         
   19 0000000C                 ENDP
   20 0000000C         
   21 0000000C         mysort  PROC
   22 0000000C B500            push             {lr}        ;Stores the return 
                                                            address
   23 0000000E 4602            mov              r2, r0      ;Copies the array a
                                                            ddress to r2 to be 
                                                            changed later
   24 00000010 F1A1 0101 
                       loop1   sub              r1, r1, #1  ;Decrements the cou
                                                            nt
   25 00000014 460F            mov              r7, r1      ;Second counter for
                                                             iterating the comp
                                                            are
   26 00000016 4613            mov              r3, r2      ;Set the start of t
                                                            he range
   27 00000018 461C            mov              r4, r3      ;Set to the next ad
                                                            dress part 1
   28 0000001A F104 0404       add              r4, r4, #4  ;Set to the next ad
                                                            dress part 2
   29 0000001E F7FF FFFE       bl               compare_and_swap
   30 00000022 4770            bx               lr
   31 00000024                 ENDP
   32 00000024         
   33 00000024         compare_and_swap
                               PROC
   34 00000024 681D    compareloop
                               ldr              r5, [r3]    ;Loads the first va
                                                            lue into r5
   35 00000026 6826            ldr              r6, [r4]    ;Loads the next val
                                                            ue into r6
   36 00000028 F815 8B01       ldrb             r8, [r5], #1 ;Loads the first c
                                                            haracter of r5 into
                                                             r8 and increments 
                                                            by 1 byte



ARM Macro Assembler    Page 2 


   37 0000002C F816 9B01       ldrb             r9, [r6], #1 ;Loads the first c
                                                            haracter of r6 into
                                                             r9 and increments 
                                                            by 1 byte
   38 00000030 45C8            cmp              r8, r9      ;Compares the first
                                                             letters
   39 00000032 D00F            beq              isequal     ;If the letters are
                                                             equal then go to t
                                                            he next letter
   40 00000034         done                                 ;Should reach this 
                                                            line once the compa
                                                            red letters are dif
                                                            ferent
   41 00000034 DC17            bgt              nextsmaller ;If r8>r9 then keep
                                                             r4 and compare to 
                                                            the next number
   42 00000036 F104 0404       add              r4, r4, #4  ;  ;Go to the next 
                                                            value
   43 0000003A F1A7 0701       sub              r7, r7, #1  ;Decrement the coun
                                                            t
   44 0000003E 2F00            cmp              r7, #0      ;Check if it's at t
                                                            he end of the list
   45 00000040 DCF0            bgt              compareloop ;If not, then keep 
                                                            comparing
   46 00000042         done2                                ;After reaching thi
                                                            s line, the smalles
                                                            t value's address s
                                                            hould be in r3 and 
                                                            the value in r5
   47 00000042 681D            ldr              r5, [r3]    ;Load the smallest 
                                                            number into r5
   48 00000044 6816            ldr              r6, [r2]    ;Load the address i
                                                            nto r6
   49 00000046 6015            str              r5, [r2]    ;Store the address
   50 00000048 601E            str              r6, [r3]    ;Store the smallest
                                                             number
   51 0000004A F102 0204       add              r2, r2, #4  ;Go to the next add
                                                            ress
   52 0000004E 2901            cmp              r1, #1      ;Check if it's at t
                                                            he end of the list
   53 00000050 DCDE            bgt              loop1       ;If not then start 
                                                            the whole proccess 
                                                            over
   54 00000052 BD00            pop              {pc}        ;If done, then retu
                                                            rn
   55 00000054         
   56 00000054 B500    isequal push             {lr}
   57 00000056 F815 8B01       ldrb             r8, [r5], #1 ;Loads the next ch
                                                            aracter of r5 into 
                                                            r8 and increments b
                                                            y 1 byte
   58 0000005A F816 9B01       ldrb             r9, [r6], #1 ;Loads the next ch
                                                            aracter of r6 into 
                                                            r9 and increments b
                                                            y 1 byte
   59 0000005E 45C8            cmp              r8, r9      ;Compares the lette
                                                            rs
   60 00000060 D0F8            beq              isequal     ;If the letters are
                                                             equal then go to t



ARM Macro Assembler    Page 3 


                                                            he next letter unti
                                                            l they are differen
                                                            t
   61 00000062 E7E7            b                done
   62 00000064         
   63 00000064         
   64 00000064 4770            bx               lr
   65 00000066         
   66 00000066 4623    nextsmaller
                               mov              r3, r4      ;Swap the smallest 
                                                            number address into
                                                             r3
   67 00000068 F104 0404       add              r4, r4, #4  ;  ;Go to the next 
                                                            value
   68 0000006C F1A7 0701       sub              r7, r7, #1  ;Decrement the coun
                                                            t
   69 00000070 2F00            cmp              r7, #0      ;Check if it's at t
                                                            he end of the list
   70 00000072 DCD7            bgt              compareloop ;If not, then keep 
                                                            comparing
   71 00000074 E7E5            b                done2
   72 00000076         
   73 00000076 4770            bx               lr
   74 00000078                 ENDP
   75 00000078         
   76 00000078                 ALIGN
   77 00000078 00000000        AREA             mydata, DATA, READONLY
   78 00000000         
   79 00000000 00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 strarray
                               DCD              str1, str2, str3, str4, str5, s
tr6, str7
   80 0000001C         
   81 0000001C         
   82 0000001C 41 6E 64 
              72 65 77 
              00       str1    DCB              "Andrew",0
   83 00000023 61 61 72 
              64 76 61 
              72 6B 00 str2    DCB              "aardvark",0
   84 0000002C 61 69 72 
              70 6C 61 
              6E 65 73 
              00       str3    DCB              "airplanes",0
   85 00000036 41 6D 65 
              72 69 63 
              61 00    str4    DCB              "America",0
   86 0000003E 61 69 72 
              20 62 61 
              6C 6C 00 str5    DCB              "air ball",0
   87 00000047 41 69 72 
              20 43 61 
              6E 61 64 
              61 00    str6    DCB              "Air Canada",0



ARM Macro Assembler    Page 4 


   88 00000052 61 69 72 
              70 6C 61 
              6E 65 00 str7    DCB              "airplane",0
   89 0000005B                 END
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M4 --apcs=interw
ork --depend=.\objects\main.d -o.\objects\main.o -IC:\Apps\Keil_v5\ARM\RV31\INC
 -IC:\Apps\Keil_v5\ARM\CMSIS\Include --predefine="__UVISION_VERSION SETA 536" -
-list=.\listings\main.lst main.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

__main 00000000

Symbol: __main
   Definitions
      At line 12 in file main.s
   Uses
      At line 9 in file main.s
Comment: __main used once
compare_and_swap 00000024

Symbol: compare_and_swap
   Definitions
      At line 33 in file main.s
   Uses
      At line 29 in file main.s
Comment: compare_and_swap used once
compareloop 00000024

Symbol: compareloop
   Definitions
      At line 34 in file main.s
   Uses
      At line 45 in file main.s
      At line 70 in file main.s

done 00000034

Symbol: done
   Definitions
      At line 40 in file main.s
   Uses
      At line 61 in file main.s
Comment: done used once
done2 00000042

Symbol: done2
   Definitions
      At line 46 in file main.s
   Uses
      At line 71 in file main.s
Comment: done2 used once
endless 0000000A

Symbol: endless
   Definitions
      At line 17 in file main.s
   Uses
      At line 17 in file main.s
Comment: endless used once
isequal 00000054

Symbol: isequal
   Definitions
      At line 56 in file main.s
   Uses
      At line 39 in file main.s
      At line 60 in file main.s

loop1 00000010



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols


Symbol: loop1
   Definitions
      At line 24 in file main.s
   Uses
      At line 53 in file main.s
Comment: loop1 used once
main 00000000

Symbol: main
   Definitions
      At line 8 in file main.s
   Uses
      None
Comment: main unused
mysort 0000000C

Symbol: mysort
   Definitions
      At line 21 in file main.s
   Uses
      At line 16 in file main.s
Comment: mysort used once
nextsmaller 00000066

Symbol: nextsmaller
   Definitions
      At line 66 in file main.s
   Uses
      At line 41 in file main.s
Comment: nextsmaller used once
11 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

mydata 00000000

Symbol: mydata
   Definitions
      At line 77 in file main.s
   Uses
      None
Comment: mydata unused
str1 0000001C

Symbol: str1
   Definitions
      At line 82 in file main.s
   Uses
      At line 79 in file main.s
Comment: str1 used once
str2 00000023

Symbol: str2
   Definitions
      At line 83 in file main.s
   Uses
      At line 79 in file main.s
Comment: str2 used once
str3 0000002C

Symbol: str3
   Definitions
      At line 84 in file main.s
   Uses
      At line 79 in file main.s
Comment: str3 used once
str4 00000036

Symbol: str4
   Definitions
      At line 85 in file main.s
   Uses
      At line 79 in file main.s
Comment: str4 used once
str5 0000003E

Symbol: str5
   Definitions
      At line 86 in file main.s
   Uses
      At line 79 in file main.s
Comment: str5 used once
str6 00000047

Symbol: str6
   Definitions
      At line 87 in file main.s
   Uses
      At line 79 in file main.s
Comment: str6 used once
str7 00000052

Symbol: str7



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

   Definitions
      At line 88 in file main.s
   Uses
      At line 79 in file main.s
Comment: str7 used once
strarray 00000000

Symbol: strarray
   Definitions
      At line 79 in file main.s
   Uses
      At line 14 in file main.s
Comment: strarray used once
9 symbols
353 symbols in table
